var typeMe = function(selector, interval) {
    var el = document.querySelectorAll(selector), elItem, elList = [], elAll, elText, charStart, charEnd, style, clearTimer, cursor, charContent;
    for (var i = 0; i < el.length; i++) {
        elList.push(el[i]);
    }
    style = function() {
        var style = document.createElement("style");
        style.appendChild(document.createTextNode(""));
        document.head.appendChild(style);
        console.log(style.sheet.cssRules);
        return style;
    }();
    style.sheet.insertRule("@keyframes caret {50% {border-color: transparent;}}", 0);
    style.sheet.insertRule(".cursor{border-right: .2rem solid #FFF; animation: caret 1s steps(1) infinite;}");
    for (var j = 0; j < elList.length; j++) {
        elAll = elList[j];
        elText = elAll.innerHTML += "<span class='cursor'></span>";
        charStart = 0;
        charEnd = 0;
        if (typeof interval === "undefined") {
            interval = 100;
        }
        (function(elAll) {
            clearTimer = setInterval(function() {
                var elNewText = elText.substr(charStart, charEnd);
                var elAllChild = elAll.childNodes;
                for (var i = 0; i < elAllChild.length; i++) {
                    if (elAllChild[i].classname == "cursor") {
                        cursor = elAllChild[i];
                    }
                }
                elAll.innerHTML = elNewText;
                charEnd = charEnd + 1;
                if (elNewText === elText) {
                    elAll.innerHTML += "<span class='cursor'></span>";
                    clearInterval(clearTimer);
                }
            }, interval);
        })(elAll);
    }
    return elAll;
};

document.addEventListener("DOMContentLoaded", function(event) {
    typeMe(".typewriter", 100);
});